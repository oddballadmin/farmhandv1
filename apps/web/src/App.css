/* Theme tokens using your palette, system-aware with manual override */
:root {
	color-scheme: light dark;

	/* Base palette variables */
	--color-dark-bg: #E9E7E1;
	--color-light-bg: #F2F1ED;
	--color-primary-text: #223459;
	--color-secondary-text: #6A5AAA;
	--color-mod-bg-dark: #F2F1ED;
	--color-mod-bg-light: #E9E7E1;
	--color-positive: #37CD97;
	--color-negative: #F84444;

	/* Default to LIGHT mapping (system dark will override) */
	--fg: var(--color-primary-text);
	--fg-secondary: var(--color-secondary-text);

	--bg: var(--color-light-bg);
	--main-bg: var(--color-light-bg);
	--header-bg: var(--color-mod-bg-light);
	--header-border: var(--color-primary-text);
	--sidebar-bg: var(--color-mod-bg-light);
	--sidebar-border: var(--color-primary-text);
	--module-panel-bg: var(--color-mod-bg-light); /* darker than page */
	--module-panel-border: var(--color-primary-text);

	--menu-btn-border: var(--color-primary-text);
	--menu-btn-hover-bg: var(--color-light-bg);
	--action-btn-bg: var(--color-secondary-text);
	--action-btn-hover-bg: var(--color-primary-text);
	--action-btn-color: var(--color-light-bg);

	--nav-link-color: var(--color-primary-text);
	--nav-link-hover-bg: var(--color-mod-bg-light);
	--nav-link-hover-color: var(--color-primary-text);
	--nav-link-active-bg: var(--color-secondary-text);
	--nav-link-active-color: var(--color-light-bg);

	--sub-menu-border-color: var(--color-primary-text);
	--sub-menu-active-bg: var(--color-secondary-text);
	--sub-menu-active-color: var(--color-light-bg);

	--border-color: var(--color-primary-text);

	--positive-color: var(--color-positive);
	--negative-color: var(--color-negative);
}

/* System DARK preference: swap page/module tones */
@media (prefers-color-scheme: dark) {
	:root {
		--fg: var(--color-primary-text);
		--fg-secondary: var(--color-secondary-text);

		--bg: var(--color-dark-bg);
		--main-bg: var(--color-dark-bg);
		--header-bg: var(--color-mod-bg-dark);
		--header-border: var(--color-primary-text);
		--sidebar-bg: var(--color-mod-bg-dark);
		--sidebar-border: var(--color-primary-text);
		--module-panel-bg: var(--color-mod-bg-dark); /* lighter than page to separate */
		--module-panel-border: var(--color-primary-text);

		--menu-btn-border: var(--color-primary-text);
		--menu-btn-hover-bg: var(--color-dark-bg);
		--action-btn-bg: var(--color-secondary-text);
		--action-btn-hover-bg: var(--color-primary-text);
		--action-btn-color: var(--color-light-bg);

		--nav-link-color: var(--color-primary-text);
		--nav-link-hover-bg: var(--color-mod-bg-dark);
		--nav-link-hover-color: var(--color-primary-text);
		--nav-link-active-bg: var(--color-secondary-text);
		--nav-link-active-color: var(--color-light-bg);

		--sub-menu-border-color: var(--color-primary-text);
		--sub-menu-active-bg: var(--color-secondary-text);
		--sub-menu-active-color: var(--color-light-bg);

		--border-color: var(--color-primary-text);
	}
}

/* Manual override: force LIGHT */
:root[data-theme="light"] {
	--fg: var(--color-primary-text);
	--fg-secondary: var(--color-secondary-text);
	--bg: var(--color-light-bg);
	--main-bg: var(--color-light-bg);
	--header-bg: var(--color-mod-bg-light);
	--header-border: var(--color-primary-text);
	--sidebar-bg: var(--color-mod-bg-light);
	--sidebar-border: var(--color-primary-text);
	--module-panel-bg: var(--color-mod-bg-light);
	--module-panel-border: var(--color-primary-text);
	--menu-btn-border: var(--color-primary-text);
	--menu-btn-hover-bg: var(--color-light-bg);
	--action-btn-bg: var(--color-secondary-text);
	--action-btn-hover-bg: var(--color-primary-text);
	--action-btn-color: var(--color-light-bg);
	--nav-link-color: var(--color-primary-text);
	--nav-link-hover-bg: var(--color-mod-bg-light);
	--nav-link-hover-color: var(--color-primary-text);
	--nav-link-active-bg: var(--color-secondary-text);
	--nav-link-active-color: var(--color-light-bg);
	--sub-menu-border-color: var(--color-primary-text);
	--sub-menu-active-bg: var(--color-secondary-text);
	--sub-menu-active-color: var(--color-light-bg);
	--border-color: var(--color-primary-text);
}

/* Manual override: force DARK */
:root[data-theme="dark"] {
	--fg: var(--color-primary-text);
	--fg-secondary: var(--color-secondary-text);
	--bg: var(--color-dark-bg);
	--main-bg: var(--color-dark-bg);
	--header-bg: var(--color-mod-bg-dark);
	--header-border: var(--color-primary-text);
	--sidebar-bg: var(--color-mod-bg-dark);
	--sidebar-border: var(--color-primary-text);
	--module-panel-bg: var(--color-mod-bg-dark);
	--module-panel-border: var(--color-primary-text);
	--menu-btn-border: var(--color-primary-text);
	--menu-btn-hover-bg: var(--color-dark-bg);
	--action-btn-bg: var(--color-secondary-text);
	--action-btn-hover-bg: var(--color-primary-text);
	--action-btn-color: var(--color-light-bg);
	--nav-link-color: var(--color-primary-text);
	--nav-link-hover-bg: var(--color-mod-bg-dark);
	--nav-link-hover-color: var(--color-primary-text);
	--nav-link-active-bg: var(--color-secondary-text);
	--nav-link-active-color: var(--color-light-bg);
	--sub-menu-border-color: var(--color-primary-text);
	--sub-menu-active-bg: var(--color-secondary-text);
	--sub-menu-active-color: var(--color-light-bg);
	--border-color: var(--color-primary-text);
}
